# NoteShot 插件 - MVP 阶段产品需求文档（PRD）

## 一、产品概述

### 产品名称
NoteShot

### 产品定位
NoteShot 是一款面向网页学习者的浏览器插件，用户在看网课或阅读时可以通过快捷键快速截图，所有截图会展示在一个独立网页中，用户可在图下方添加 Markdown 笔记，并一键导出，方便后续整理、输出、复习。

## 二、核心功能

### 功能目标（MVP 范围）

| 功能模块 | 描述 |
| --- | --- |
| 快捷截图 | 使用快捷键对当前浏览器可见区域截图 |
| 网页展示 | 所有截图会自动展示在一个笔记网页中 |
| Markdown 笔记 | 每张图下方提供 Markdown 编辑器，用于记录笔记 |
| 自动保存 | 页面数据保存在本地（localStorage），之后会用 Vercel Neon 数据库 |
| 导出功能 | 可一键导出当前笔记为 .md 文件，含图片链接（base64 或相对路径） |

## 三、界面与交互说明

### 入口
- 用户点击插件图标 popup，或使用快捷键，进行截图
- 插件打开 editor.html（独立笔记页面）

### 编辑页面结构（editor.html）
```
+----------------------------------------------------+
| NoteShot 编辑页面导航栏（Logo + 导出按钮）         |
+----------------------------------------------------+

  [图片1]
  📝 Markdown 编辑区（SimpleMDE 或 ToastUI）

  [图片2]
  📝 Markdown 编辑区

  ...

+-------------------------+
|        导出 Markdown      |
+-------------------------+
```

## 四、技术设计

### 项目结构
在现有技术上添加：
```
├── editor.js             ← 渲染截图 + Markdown 区逻辑
├── editor.html           ← 独立笔记页面
├── images/               ← 保存截图图片
```

### 技术细节

| 功能 | 技术方案 |
| --- | --- |
| 截图 | 复用现有 extension 中的截图功能 |
| Markdown 编辑器 | 使用 SimpleMDE 或 Toast UI Editor |
| 本地存储 | 使用 localStorage 或 IndexedDB 保存截图和笔记内容 |
| 图片存储 | 可先使用 base64 直接渲染于 HTML（便于首个版本开发） |
| 导出功能 | 通过 JS 拼接 Markdown 字符串，使用 Blob 下载 .md 文件 |

### 技术栈
- **前端框架:** Next.js（用于构建独立网页编辑器界面）
- **组件库:** shadcn/ui（提供预构建的可访问 UI 组件）
- **样式:** Tailwind CSS（用于实用优先的样式设计）
- **状态管理:** Jotai（用于高效的组件间状态管理）
- **数据库:** 初期使用 localStorage，后期使用 Vercel Neon（PostgreSQL 无服务器数据库，用于存储用户偏好和笔记）

## 五、验收标准

| 功能 | 验收条件 |
| --- | --- |
| 截图成功 | 按快捷键后生成截图并跳转到编辑页面 |
| 图片展示 | 图片可在页面中顺序展示 |
| Markdown 可写 | 每张图下方 Markdown 区可正常输入，支持预览 |
| 自动保存 | 页面刷新后数据仍可恢复 |
| 成功导出 | 点击"导出"后生成并下载 .md 文件，内容包括图片链接和笔记文本 |

## 六、开发与测试时间建议

| 阶段 | 内容 |
| --- | --- |
| 🧱 插件框架 + 快捷键 + 页面跳转 | 1-2 天 |
| 📸 截图功能实现 + base64 图片展示 | 2-3 天 |
| 📝 嵌入 Markdown 编辑器 | 1-2 天 |
| 💾 数据本地保存与恢复 | 1-2 天 |
| 📤 导出 Markdown 功能 + UI 调整 | 1-2 天 |
| ✅ 测试与修复 | 1-2 天 |

## 七、系统架构

本项目包含两个主要部分：
1. **Chrome 扩展部分**: 负责截图功能，将截图数据传输到独立网页
2. **独立网页部分**: 负责笔记编辑、保存和导出功能

### 数据流
```
+----------------+          +-------------------+
| Chrome 扩展     |  截图数据  | 独立网页编辑器     |
| (截取屏幕区域)   | -------> | (展示+编辑+导出)   |
+----------------+          +-------------------+
                                    |
                                    | 保存
                                    v
                            +-----------------+
                            | 本地存储         |
                            | (localStorage)  |
                            +-----------------+
```

## 八、未来功能规划
- 云同步功能：将笔记保存到 Vercel Neon 数据库
- 笔记组织：添加标签、文件夹功能
- 智能识别：OCR 识别截图中的文字
- 搜索功能：搜索笔记内容
- 分享功能：生成可分享的笔记链接 